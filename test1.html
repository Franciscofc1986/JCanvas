<!DOCTYPE HTML>

<html>

	<head>

		<meta charset="utf-8" />

		<title>JCanvas库　之　实时追踪</title>

		<script type="text/javascript" src="JCanvas.js"></script>
	</head>

	<body>

		<canvas id="myCanvas" width="800" height="600">
			您的浏览器不支持Canvas标签。

			IE用户请务必使用IE9（不兼容XP）及以上版本；

			其它浏览器用户请尽量使用最新版本浏览器。
		</canvas>

		<script type="text/javascript">
			var canvas=document.getElementById("myCanvas");//获得canvas对象

			var stage=new Stage(canvas);//一个canvas对象只能对应且必须对应一个Stage类型的实例

			var myself=new Sprite(stage.ctx);
			myself.x=myself.y=50;
			myself.width=50;
			myself.height=50;
			myself.draw= function() {
				this.ctx.beginPath();
				this.ctx.arc(0,0,25,0,Math.PI*2,true);
				this.ctx.closePath();
				this.ctx.fillStyle="black";
				this.ctx.fill();
			};
			var badMan=new Sprite(stage.ctx);
			badMan.x=500;
			badMan.y=500;
			badMan.width=50;
			badMan.height=50;
			badMan.draw= function() {
				this.ctx.beginPath();
				this.ctx.arc(0,0,25,0,Math.PI*2,true);
				this.ctx.closePath();
				this.ctx.fillStyle="red";
				this.ctx.fill();
			};
			var btn1=new SimpleButton(stage.ctx);
			btn1.width=200;
			btn1.height=50;
			btn1.upState.draw= function() {
				this.ctx.fillStyle="blue";
				this.ctx.fillRect(0,0,this.width,this.height);
			};
			btn1.downState.draw= function() {
				this.ctx.fillStyle="black";
				this.ctx.fillRect(0,0,this.width,this.height);
			};
			btn1.overState.draw= function() {
				this.ctx.fillStyle="yellow";
				this.ctx.fillRect(0,0,this.width,this.height);
			};
			btn1.addEventListner("onclick",function(){
				alert("哈哈！");
			});
			stage.addChild(myself);
			stage.addChild(badMan);
			stage.addChild(btn1);
			stage.onEnterFrame= function() {
				badMan.x+=(myself.x-badMan.x)*0.1;
				badMan.y+=(myself.y-badMan.y)*0.1;
			};
			stage.addEventListner("onmousemove", function(x,y) {
				myself.x=x;
				myself.y=y;
			});
			stage.start();
		</script>
	</body>

</html>
